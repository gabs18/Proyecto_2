)
orchidaceae %>%
st_drop_geometry() %>%
select(species, eventDate, provincia, canton) %>%
datatable(
colnames = c("Especie", "Fecha", "Provincia", "Cantón"),
options = list(searchHighlight = TRUE,
language = list(url = '//cdn.datatables.net/plug-ins/1.10.25/i18n/Spanish.json'),
pageLength = 10)
)
# Gráfico pastel de los registros de orquídeas en Costa Rica
plot_ly(orchidaceae, labels = ~ species, type = "pie",
textposition = 'inside',
marker = list (colors = viridis),
textinfo = 'label+percent',
hover = ~ 'Cantidad de registros',
hoverinfo = "value",
showlegend = FALSE) %>%
layout(title = "Registros de orquídeas en Costa Rica")%>%
config(locale = "es")
plot_ly(view_orchi, labels = ~ species, type = "pie",
textposition = 'inside',
marker = list (colors = viridis),
textinfo = 'label+percent',
hover = ~ 'Cantidad de registros',
hoverinfo = "value",
showlegend = FALSE) %>%
layout(title = "Registros de orquídeas en Costa Rica")%>%
config(locale = "es")
?species
species
orchidaceae(species)
orchidaceae[species]
[species]
View(orchidaceae[species])
orch_sum <- c(orchidaceae[1:10], sum(orchidaceae[11:length(x = orchidaceae)]))
orch_sum <- c(species[1:10], sum(species[11:length(x = species)]))
view_orchi <-
orchidaceae %>%
st_drop_geometry() %>%
filter(!is.na(species) & species != "") %>%
group_by(species) %>%
summarise(registros = n()) %>%
arrange(desc(registros)) %>%
mutate(c(species[1:10], sum(species[11:length(x = species)]))) %>%
slice(1:10)
view_orchi <-
orchidaceae %>%
st_drop_geometry() %>%
filter(!is.na(species) & species != "") %>%
group_by(species) %>%
summarise(registros = n()) %>%
arrange(desc(registros)) %>%
arrange(c(species[1:10], sum(species[11:length(x = species)]))) %>%
slice(1:10)
view_orchi <-
orchidaceae %>%
st_drop_geometry() %>%
filter(!is.na(species) & species != "") %>%
group_by(species) %>%
summarise(registros = n()) %>%
arrange(desc(registros)) %>%
slice(c(species[1:10], sum(species[11:232) %>%
slice(1:10)
view_orchi <-
orchidaceae %>%
st_drop_geometry() %>%
filter(!is.na(species) & species != "") %>%
group_by(species) %>%
summarise(registros = n()) %>%
arrange(desc(registros)) %>%
mutate(c(species[1:10], sum(species[11:232) %>%
slice(1:10)
view_orchi <-
orchidaceae %>%
st_drop_geometry() %>%
filter(!is.na(species) & species != "") %>%
group_by(species) %>%
summarise(registros = n()) %>%
arrange(desc(registros)) %>%
select(c(species[1:10], sum(species[11:232) %>%
slice(1:10)
view_orchi <-
orchidaceae %>%
st_drop_geometry() %>%
filter(!is.na(species) & species != "") %>%
group_by(species) %>%
summarise(registros = n()) %>%
arrange(desc(registros)) %>%
select(c(species[1:10], sum(species[11:232]))) %>%
slice(1:10)
# 10 especies con mayor cantidad de registros
view_orchi <-
orchidaceae %>%
st_drop_geometry() %>%
filter(!is.na(species) & species != "") %>%
group_by(species) %>%
summarise(registros = n()) %>%
arrange(desc(registros)) %>%
slice(1:10, sum(11:232))
View(view_orchi)
view_orchi <-
orchidaceae %>%
st_drop_geometry() %>%
filter(!is.na(species) & species != "") %>%
group_by(species) %>%
summarise(registros = n()) %>%
arrange(desc(registros)) %>%
mutate(sum(11:232)) %>%
slice(1:10)
View(view_orchi)
view_orchi <-
orchidaceae %>%
st_drop_geometry() %>%
filter(!is.na(species) & species != "") %>%
group_by(species) %>%
summarise(registros = n()) %>%
arrange(desc(registros)) %>%
slice(1:10)
View(view_orchi)
# 10 especies con mayor cantidad de registros
view_orchi <-
orchidaceae %>%
st_drop_geometry() %>%
filter(!is.na(species) & species != "") %>%
group_by(species) %>%
summarise(registros = n()) %>%
arrange(desc(registros)) %>%
slice(sum(11:232)) %>%
slice(1:10)
View(view_orchi)
view_orchi <-
orchidaceae %>%
st_drop_geometry() %>%
filter(!is.na(species) & species != "") %>%
group_by(species) %>%
summarise(registros = n()) %>%
arrange(desc(registros)) %>%
slice(1:10 & sum(11:232))
view_orchi <-
orchidaceae %>%
st_drop_geometry() %>%
filter(!is.na(species) & species != "") %>%
group_by(species) %>%
summarise(registros = n()) %>%
arrange(desc(registros)) %>%
sum(species[11:232]) %>%
slice(1:10)
view_orchi <-
orchidaceae %>%
st_drop_geometry() %>%
filter(!is.na(species) & species != "") %>%
group_by(species) %>%
summarise(registros = n()) %>%
arrange(desc(registros)) %>%
sum(orchidaceae[species[11:232]]) %>%
slice(1:10)
view_orchi <-
orchidaceae %>%
st_drop_geometry() %>%
filter(!is.na(species) & species != "") %>%
group_by(species) %>%
summarise(registros = n()) %>%
arrange(desc(registros)) %>%
sum(orchidaceae[11:232]) %>%
slice(1:10)
view_orchi <-
orchidaceae %>%
st_drop_geometry() %>%
filter(!is.na(species) & species != "") %>%
group_by(species) %>%
summarise(registros = n()) %>%
arrange(desc(registros)) %>%
sum(slice(11:232)) %>%
slice(1:10)
view_orchi <-
orchidaceae %>%
st_drop_geometry() %>%
filter(!is.na(species) & species != "") %>%
group_by(species) %>%
summarise(registros = n()) %>%
arrange(desc(registros)) %>%
slice(11:232) %>%
slice(1:10)
View(view_orchi)
view_orchi <-
orchidaceae %>%
st_drop_geometry() %>%
filter(!is.na(species) & species != "") %>%
group_by(species) %>%
summarise(registros = n()) %>%
arrange(desc(registros)) %>%
slice(1:10)
View(view_orchi)
otros <-
orchidaceae %>%
st_drop_geometry() %>%
filter(!is.na(species) & species != "") %>%
group_by(species) %>%
summarise(registros = n()) %>%
arrange(desc(registros)) %>%
slice(11:232)
View(otros)
orch_slice_10 <-
orchidaceae %>%
st_drop_geometry() %>%
filter(!is.na(species) & species != "") %>%
group_by(species) %>%
summarise(registros = n()) %>%
arrange(desc(registros)) %>%
slice(1:10)
otros <-
orchidaceae %>%
st_drop_geometry() %>%
filter(!is.na(species) & species != "") %>%
group_by(species) %>%
summarise(registros = n(),
suma_otros = sum (species [11:232])) %>%
arrange(desc(registros))
otros <-
orchidaceae %>%
st_drop_geometry() %>%
filter(!is.na(species) & species != "") %>%
group_by(species) %>%
summarise(registros = n(),
suma_otros = sum (registros [11:232])) %>%
arrange(desc(registros))
View(otros)
otros <-
orchidaceae %>%
st_drop_geometry() %>%
filter(!is.na(species) & species != "") %>%
group_by(species) %>%
summarise(registros = n()) %>%
select(suma_otros = sum (registros [11:232])) %>%
arrange(desc(registros))
otros <-
orchidaceae %>%
st_drop_geometry() %>%
filter(!is.na(species) & species != "") %>%
group_by(species) %>%
summarise(registros = n()) %>%
sum(species = 11:232) %>%
arrange(desc(registros))
orch_slice_10 <-
otros %>%
summarise(suma_otros = sum(otros)) %>%
View(orch_slice_10)
# 10 especies con mayor cantidad de registros
orch_slice_10 <-
orchidaceae %>%
st_drop_geometry() %>%
filter(!is.na(species) & species != "") %>%
group_by(species) %>%
summarise(registros = n()) %>%
arrange(desc(registros)) %>%
slice(1:10)
orch_slice_10 <-
otros %>%
summarise(suma_otros = sum(registros)
View(orch_slice_10)
orch_slice_10 <-
otros %>%
summarise(suma_otros = sum(registros))
View(orch_slice_10)
orch_slice_10 <-
orchidaceae %>%
st_drop_geometry() %>%
filter(!is.na(species) & species != "") %>%
group_by(species) %>%
summarise(registros = n()) %>%
arrange(desc(registros)) %>%
slice(1:10)
data_frame <- data.frame (
"species" = as.character("Otras"),
"Total" = sum(registros[11:232])
)
data_frame <- data.frame (
"species" = as.character("Otras"),
"Total" = sum(otros)
)
data_frame <- data.frame (
"species" = as.character("Otras"),
"Total" = otros
)
View(data_frame)
otros <-
orchidaceae %>%
st_drop_geometry() %>%
filter(!is.na(species) & species != "") %>%
group_by(species) %>%
summarise(registros = n()) %>%
arrange(desc(registros)) %>%
slice(11:232)%>%
group_by(species = as.character("Otros")) %>%
summarise(total = sum(regitros))
otros <-
orchidaceae %>%
st_drop_geometry() %>%
filter(!is.na(species) & species != "") %>%
group_by(species) %>%
summarise(registros = n()) %>%
arrange(desc(registros)) %>%
slice(11:232) %>%
group_by(species = as.character("otros")) %>%
summarise(total = sum(registros))
otros <-
orquideas %>%
st_drop_geometry() %>%
filter(!is.na(species) & species != "") %>%
group_by(species) %>%
summarise(registros = n()) %>%
arrange(desc(registros)) %>%
slice(11:232) %>%
group_by(species = as.character("Otros")) %>%
summarise(registros = sum(registros))
visualizacion_orquideas <-
merge(orch_slice_10, otros, all = TRUE)
otros <-
orchidaceae %>%
st_drop_geometry() %>%
filter(!is.na(species) & species != "") %>%
group_by(species) %>%
summarise(registros = n()) %>%
arrange(desc(registros)) %>%
slice(11:232) %>%
group_by(species = as.character("Otros")) %>%
summarise(registros = sum(registros))
visualizacion_orquideas <-
merge(orch_slice_10, otros, all = TRUE)
# Grafico
plot_ly(visualizacion_orquideas, labels =  ~species, values = ~registros, type = 'pie',
textposition = 'inside',
insidetextfont = list(color = viridis),
hoverinfo = "label+value",
showlegend = TRUE,
marker = list(line = list(color = "#ffffff", width = 1))
) %>%
layout(title = 'Registro de orquideas en Costa Rica') %>%
config(locale = "es")
pal <- viridis(15)
# Grafico
plot_ly(visualizacion_orquideas, labels =  ~species, values = ~registros, type = 'pie',
textposition = 'inside',
insidetextfont = list(color = pal),
hoverinfo = "label+value",
showlegend = TRUE,
marker = list(line = list(color = "#ffffff", width = 1))
) %>%
layout(title = 'Registro de orquideas en Costa Rica') %>%
config(locale = "es")
# Grafico
plot_ly(visualizacion_orquideas, labels =  ~species, values = ~registros, type = 'pie',
textposition = 'inside',
insidetextfont = list(color = "#ffffff"),
hoverinfo = "label+value",
showlegend = TRUE,
marker = list(line = list(color = "#ffffff", width = 1))
) %>%
layout(title = 'Registro de orquideas en Costa Rica') %>%
config(locale = "es")
q()
View(orchidaceae)
library(flexdashboard)
library(raster)
library(rmapshaper)
library(dplyr)
library(sf)
library(DT)
library(plotly)
library(leafem)
library(leaflet)
library(leaflet.extras)
library(flexdashboard)
orquideas <-
st_read(
"https://raw.githubusercontent.com/gf0604-procesamientodatosgeograficos/2021i-datos/main/gbif/orchidaceae-cr-registros.csv",
options = c(
"X_POSSIBLE_NAMES=decimalLongitude",
"Y_POSSIBLE_NAMES=decimalLatitude"
),
quiet = TRUE
)
# Asignar proyecciones
st_crs(orquideas) = 4326
# Capa geespacial de cantones y provincias
cantones <-
st_read("https://raw.githubusercontent.com/gf0604-procesamientodatosgeograficos/2021i-datos/main/ign/delimitacion-territorial-administrativa/cr_cantones_simp_wgs84.geojson",
quiet = TRUE)
provincias <-
st_read("https://raw.githubusercontent.com/gf0604-procesamientodatosgeograficos/2021i-datos/main/ign/delimitacion-territorial-administrativa/cr_provincias_simp_wgs84.geojson",
quiet = TRUE)
# Cruce espacial con la tabla de cantones y provincias, para obtener sus nombres
orquideas <-
orquideas %>%
st_join(cantones["canton"]) %>%
st_join(provincias["provincia"])
# 1. Limpieza
# Conversion de los valores
orquideas <-
orquideas %>%
mutate(coordinateUncertaintyInMeters = as.numeric(coordinateUncertaintyInMeters)) %>%
mutate(eventDate = as.Date(eventDate, "%Y-%m-%d"))
# Limpieza de los valores de alta incertidumbre (<1000)
orquideas <-
orquideas %>%
filter(!is.na(coordinateUncertaintyInMeters) & coordinateUncertaintyInMeters <= 1000)
valueBox(value = nrow(orquideas$genus),
caption = "Género",
icon = "fas fa-fan",
color = "#bb6dbd"
)
install.packages("shiny")
library(flexdashboard)
library(raster)
library(rmapshaper)
library(dplyr)
library(sf)
library(DT)
library(plotly)
library(leafem)
library(leaflet)
library(leaflet.extras)
library(flexdashboard)
library(shiny)
orquideas <-
st_read(
"https://raw.githubusercontent.com/gf0604-procesamientodatosgeograficos/2021i-datos/main/gbif/orchidaceae-cr-registros.csv",
options = c(
"X_POSSIBLE_NAMES=decimalLongitude",
"Y_POSSIBLE_NAMES=decimalLatitude"
),
quiet = TRUE
)
# Asignar proyecciones
st_crs(orquideas) = 4326
# Capa geespacial de cantones y provincias
cantones <-
st_read("https://raw.githubusercontent.com/gf0604-procesamientodatosgeograficos/2021i-datos/main/ign/delimitacion-territorial-administrativa/cr_cantones_simp_wgs84.geojson",
quiet = TRUE)
provincias <-
st_read("https://raw.githubusercontent.com/gf0604-procesamientodatosgeograficos/2021i-datos/main/ign/delimitacion-territorial-administrativa/cr_provincias_simp_wgs84.geojson",
quiet = TRUE)
# Cruce espacial con la tabla de cantones y provincias, para obtener sus nombres
orquideas <-
orquideas %>%
st_join(cantones["canton"]) %>%
st_join(provincias["provincia"])
# 1. Limpieza
# Conversion de los valores
orquideas <-
orquideas %>%
mutate(coordinateUncertaintyInMeters = as.numeric(coordinateUncertaintyInMeters)) %>%
mutate(eventDate = as.Date(eventDate, "%Y-%m-%d"))
# Limpieza de los valores de alta incertidumbre (<1000)
orquideas <-
orquideas %>%
filter(!is.na(coordinateUncertaintyInMeters) & coordinateUncertaintyInMeters <= 1000)
q()
q()
q()
valueBox(text = "Orquideas",
caption = paste
("ver más",
actionButton("http://www.jbl.ucr.ac.cr/orquideas")),
icon = "fas fa-fan",
color = "#f2bddd")
library(flexdashboard)
library(raster)
library(rmapshaper)
library(dplyr)
library(sf)
library(DT)
library(plotly)
library(leafem)
library(leaflet)
library(leaflet.extras)
orquideas <-
st_read(
"https://raw.githubusercontent.com/gf0604-procesamientodatosgeograficos/2021i-datos/main/gbif/orchidaceae-cr-registros.csv",
options = c(
"X_POSSIBLE_NAMES=decimalLongitude",
"Y_POSSIBLE_NAMES=decimalLatitude"
),
quiet = TRUE
)
# Asignar proyecciones
st_crs(orquideas) = 4326
# Capa geespacial de cantones y provincias
cantones <-
st_read("https://raw.githubusercontent.com/gf0604-procesamientodatosgeograficos/2021i-datos/main/ign/delimitacion-territorial-administrativa/cr_cantones_simp_wgs84.geojson",
quiet = TRUE)
provincias <-
st_read("https://raw.githubusercontent.com/gf0604-procesamientodatosgeograficos/2021i-datos/main/ign/delimitacion-territorial-administrativa/cr_provincias_simp_wgs84.geojson",
quiet = TRUE)
# Cruce espacial con la tabla de cantones y provincias, para obtener sus nombres
orquideas <-
orquideas %>%
st_join(cantones["canton"]) %>%
st_join(provincias["provincia"])
# 1. Limpieza
# Conversion de los valores
orquideas <-
orquideas %>%
mutate(coordinateUncertaintyInMeters = as.numeric(coordinateUncertaintyInMeters)) %>%
mutate(eventDate = as.Date(eventDate, "%Y-%m-%d"))
# Limpieza de los valores de alta incertidumbre (<1000)
orquideas <-
orquideas %>%
filter(!is.na(coordinateUncertaintyInMeters) & coordinateUncertaintyInMeters <= 1000)
q()
q()
